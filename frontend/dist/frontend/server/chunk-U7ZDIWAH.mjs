import './polyfills.server.mjs';
import{a as x,d as G}from"./chunk-4A4LZVS2.mjs";import{b as T}from"./chunk-A7HNNZIB.mjs";import{c as a,d as m}from"./chunk-TJ446NKF.mjs";import{Ia as C,Qa as A,Ya as R,Za as S,cb as b,ea as g,f as l,fb as D,hb as i,i as d,kb as P,q as o,t as h,ta as v}from"./chunk-NOQO3GIZ.mjs";var W=(()=>{class t{constructor(){this.title="vivo-knowledge"}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-root"]],standalone:!0,features:[v],decls:1,vars:0,template:function(e,r){e&1&&g(0,"router-outlet")},dependencies:[A,D],encapsulation:2})}}return t})();var u=()=>{let t=o(a),p=o(i);return t.isAuthenticated()?!0:(p.navigate(["/login"]),!1)};var f=(t,p)=>{let n=o(a),e=o(m),r=o(i);if(!n.isAuthenticated())return r.navigate(["/login"]),!1;if(!e.isGestor()){let s=e.getDefaultRoute();return r.navigate([s]),!1}return!0},c=(t,p)=>{let n=o(a),e=o(m),r=o(i);if(!n.isAuthenticated())return r.navigate(["/login"]),!1;if(!e.isColaborador()){let s=e.getDefaultRoute();return r.navigate([s]),!1}return!0};var w=[{path:"login",loadComponent:()=>import("./chunk-LC2M3RHW.mjs").then(t=>t.LoginComponent)},{path:"home",loadComponent:()=>import("./chunk-5PT3ZAI7.mjs").then(t=>t.HomeComponent),canActivate:[u,c]},{path:"progresso",loadComponent:()=>import("./chunk-GODWXF7M.mjs").then(t=>t.ProgressoComponent),canActivate:[u,c]},{path:"dashboard",loadComponent:()=>import("./chunk-5LMQ35EX.mjs").then(t=>t.DashboardComponent),canActivate:[u,f]},{path:"collaborator/:id",loadComponent:()=>import("./chunk-ELX426VR.mjs").then(t=>t.CollaboratorProgressComponent),canActivate:[u,f]},{path:"topic/:id",loadComponent:()=>import("./chunk-CEIPX2TI.mjs").then(t=>t.TopicComponent),canActivate:[u,c]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}];var M=(t,p)=>{let n=o(a),e=o(i),r=n.getToken();return r&&!t.url.includes("/auth/")&&(t=t.clone({setHeaders:{Authorization:`Bearer ${r}`}})),p(t).pipe(d(s=>(s.status===401&&(n.logout(),e.navigate(["/login"])),l(()=>s))))};var j={providers:[P(w),R(S([M])),x(),T({timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!0,progressBar:!0,closeButton:!0})]};var y={providers:[G()]},k=C(j,y);var B=()=>b(W,k),gt=B;export{gt as a};
