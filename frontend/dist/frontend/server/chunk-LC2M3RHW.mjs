import './polyfills.server.mjs';
import{a as w}from"./chunk-A7HNNZIB.mjs";import"./chunk-J4BDXTMW.mjs";import{a as E,b as z,c as f,d as F,e as I,g as L,h as T,i as j,m as V,o as Y}from"./chunk-7FRDF5AI.mjs";import{b as y,c as S,d as k}from"./chunk-TJ446NKF.mjs";import{$ as _,O as l,P as m,Pa as P,Qa as M,X as p,Z as s,ba as x,ca as t,da as i,ea as c,hb as O,ja as u,ka as b,la as r,t as C,ta as v}from"./chunk-NOQO3GIZ.mjs";import"./chunk-VVCT4QZE.mjs";function N(o,g){o&1&&(t(0,"span"),r(1,"Email \xE9 obrigat\xF3rio"),i())}function A(o,g){o&1&&(t(0,"span"),r(1,"Email inv\xE1lido"),i())}function R(o,g){if(o&1&&(t(0,"div",30),c(1,"i",31),p(2,N,2,0,"span",24)(3,A,2,0,"span",24),i()),o&2){let n=b();l(2),s("ngIf",n.emailControl==null||n.emailControl.errors==null?null:n.emailControl.errors.required),l(),s("ngIf",n.emailControl==null||n.emailControl.errors==null?null:n.emailControl.errors.email)}}function q(o,g){o&1&&(t(0,"span"),r(1,"Senha \xE9 obrigat\xF3ria"),i())}function G(o,g){o&1&&(t(0,"span"),r(1,"M\xEDnimo de 6 caracteres"),i())}function B(o,g){if(o&1&&(t(0,"div",30),c(1,"i",31),p(2,q,2,0,"span",24)(3,G,2,0,"span",24),i()),o&2){let n=b();l(2),s("ngIf",n.senhaControl==null||n.senhaControl.errors==null?null:n.senhaControl.errors.required),l(),s("ngIf",n.senhaControl==null||n.senhaControl.errors==null?null:n.senhaControl.errors.minlength)}}function U(o,g){o&1&&(t(0,"span"),c(1,"i",32),r(2," Entrar "),i())}function K(o,g){o&1&&(t(0,"span",33),c(1,"div",34),r(2," Entrando... "),i())}var oe=(()=>{class o{constructor(n,a,e,d,h,D){this.fb=n,this.authService=a,this.router=e,this.toastr=d,this.storage=h,this.userProfileService=D,this.isLoading=!1,this.showPassword=!1,this.loginForm=this.fb.group({email:["",[f.required,f.email]],senha:["",[f.required,f.minLength(6)]],lembrarMe:[!1]})}ngOnInit(){if(this.authService.isAuthenticated()){let a=this.userProfileService.getDefaultRoute();this.router.navigate([a])}let n=this.storage.getItem("rememberedEmail","local");n&&this.loginForm.patchValue({email:n,lembrarMe:!0})}onSubmit(){if(this.loginForm.invalid){this.markFormGroupTouched(this.loginForm);return}this.isLoading=!0;let{email:n,senha:a,lembrarMe:e}=this.loginForm.value;this.authService.login({email:n,senha:a,lembrarMe:e}).subscribe({next:d=>{d.success&&(e?this.storage.setItem("rememberedEmail",n,"local"):this.storage.removeItem("rememberedEmail","local"),this.toastr.success("Login realizado com sucesso!","Bem-vindo"),setTimeout(()=>{let h=this.userProfileService.getDefaultRoute();this.router.navigate([h])},100))},error:d=>{this.isLoading=!1,this.toastr.error(d.error?.message||"Erro ao realizar login","Erro")},complete:()=>{this.isLoading=!1}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}onForgotPassword(){let n=this.loginForm.get("email")?.value;if(!n){this.toastr.warning("Digite seu e-mail para recuperar a senha.","Aten\xE7\xE3o");return}this.isLoading=!0,this.authService.forgotPassword(n).subscribe({next:()=>{this.toastr.success("Instru\xE7\xF5es de recupera\xE7\xE3o enviadas para seu e-mail.","Recupera\xE7\xE3o de Senha")},error:a=>{this.toastr.error(a.error?.message||"Erro ao solicitar recupera\xE7\xE3o de senha","Erro")},complete:()=>{this.isLoading=!1}})}markFormGroupTouched(n){Object.keys(n.controls).forEach(a=>{n.get(a)?.markAsTouched()})}get emailControl(){return this.loginForm.get("email")}get senhaControl(){return this.loginForm.get("senha")}static{this.\u0275fac=function(a){return new(a||o)(m(V),m(S),m(O),m(w),m(y),m(k))}}static{this.\u0275cmp=C({type:o,selectors:[["app-login"]],standalone:!0,features:[v],decls:43,vars:13,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"logo-circle"],[1,"logo-text"],[1,"login-title"],[1,"login-subtitle"],[1,"login-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"form-label"],[1,"fas","fa-envelope"],[1,"input-wrapper"],["type","email","id","email","formControlName","email","placeholder","seu.email@vivo.com.br",1,"form-control"],["class","error-message",4,"ngIf"],["for","senha",1,"form-label"],[1,"fas","fa-lock"],[1,"password-field"],["id","senha","formControlName","senha","placeholder","Digite sua senha",1,"form-control",3,"type"],["type","button","tabindex","-1",1,"password-toggle",3,"click"],[1,"form-check"],["type","checkbox","id","lembrarMe","formControlName","lembrarMe",1,"form-check-input"],["for","lembrarMe",1,"form-check-label"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"forgot-password"],["href","javascript:void(0)",3,"click"],[1,"fas","fa-question-circle"],[1,"login-footer"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-sign-in-alt"],[1,"loading-state"],[1,"spinner"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5,"VIVO"),i()(),t(6,"h1",5),r(7,"Vivo Knowledge"),i(),t(8,"p",6),r(9,"Sistema de Onboarding"),i()(),t(10,"div",7)(11,"form",8),u("ngSubmit",function(){return e.onSubmit()}),t(12,"div",9)(13,"label",10),c(14,"i",11),r(15," E-mail "),i(),t(16,"div",12),c(17,"input",13),p(18,R,4,2,"div",14),i()(),t(19,"div",9)(20,"label",15),c(21,"i",16),r(22," Senha "),i(),t(23,"div",12)(24,"div",17),c(25,"input",18),t(26,"button",19),u("click",function(){return e.togglePasswordVisibility()}),c(27,"i"),i()(),p(28,B,4,2,"div",14),i()(),t(29,"div",20),c(30,"input",21),t(31,"label",22),r(32," Lembrar-me neste dispositivo "),i()(),t(33,"button",23),p(34,U,3,0,"span",24)(35,K,3,0,"span",25),i(),t(36,"div",26)(37,"a",27),u("click",function(){return e.onForgotPassword()}),c(38,"i",28),r(39," Esqueci minha senha "),i()()()(),t(40,"div",29)(41,"p"),r(42,"\xA9 2025 Vivo Knowledge - Todos os direitos reservados"),i()()()()),a&2&&(l(11),s("formGroup",e.loginForm),l(6),_("is-invalid",(e.emailControl==null?null:e.emailControl.invalid)&&(e.emailControl==null?null:e.emailControl.touched)),l(),s("ngIf",(e.emailControl==null?null:e.emailControl.invalid)&&(e.emailControl==null?null:e.emailControl.touched)),l(7),_("is-invalid",(e.senhaControl==null?null:e.senhaControl.invalid)&&(e.senhaControl==null?null:e.senhaControl.touched)),s("type",e.showPassword?"text":"password"),l(2),x(e.showPassword?"fas fa-eye-slash":"fas fa-eye"),l(),s("ngIf",(e.senhaControl==null?null:e.senhaControl.invalid)&&(e.senhaControl==null?null:e.senhaControl.touched)),l(5),s("disabled",e.isLoading||e.loginForm.invalid),l(),s("ngIf",!e.isLoading),l(),s("ngIf",e.isLoading))},dependencies:[M,P,Y,L,z,E,F,I,T,j],styles:['@charset "UTF-8";.login-container[_ngcontent-%COMP%]{min-height:100vh;width:100vw;background:linear-gradient(135deg,#609,#90c,#c0f);display:flex;align-items:center;justify-content:center;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;animation:_ngcontent-%COMP%_gradientShift 10s ease infinite;background-size:200% 200%;background-attachment:fixed;margin:0;position:relative;overflow-x:hidden}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 25px 50px #00000026;overflow:hidden;width:100%;max-width:420px;animation:_ngcontent-%COMP%_cardEntry .6s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_cardEntry{0%{opacity:0;transform:scale(.9) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}.login-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#609,#90c);padding:40px 30px;text-align:center;position:relative;overflow:hidden}.login-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_pulse 4s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:.5}50%{transform:scale(1.1);opacity:.3}}.logo-circle[_ngcontent-%COMP%]{width:90px;height:90px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;position:relative;z-index:1;box-shadow:0 10px 30px #0003;animation:_ngcontent-%COMP%_logoFloat 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_logoFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.logo-text[_ngcontent-%COMP%]{font-size:28px;font-weight:700;background:linear-gradient(135deg,#609,#c0f);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-title[_ngcontent-%COMP%]{color:#fff;font-size:28px;font-weight:600;margin:0 0 8px;position:relative;z-index:1;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.login-subtitle[_ngcontent-%COMP%]{color:#fffffff2;font-size:15px;margin:0;position:relative;z-index:1}.login-body[_ngcontent-%COMP%]{padding:40px 35px}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;color:#2d3748;font-size:14px;font-weight:600;letter-spacing:.5px;text-align:left;padding-left:2px}.form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#90c}.input-wrapper[_ngcontent-%COMP%], .password-field[_ngcontent-%COMP%]{position:relative}.form-control[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #e2e8f0;border-radius:12px;font-size:15px;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f8f9fa;color:#2d3748}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#90c;background:#fff;box-shadow:0 0 0 4px #9900cc1a;transform:translateY(-1px)}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#e53e3e;background:#fff5f5}.form-control[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);background:none;border:none;color:#718096;cursor:pointer;padding:5px;transition:all .2s}.password-toggle[_ngcontent-%COMP%]:hover{color:#90c}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;color:#e53e3e;font-size:13px;margin-top:6px;animation:_ngcontent-%COMP%_errorSlide .3s ease}@keyframes _ngcontent-%COMP%_errorSlide{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;font-size:12px}.form-check[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:25px}.form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px;cursor:pointer;accent-color:#9900cc}.form-check-label[_ngcontent-%COMP%]{color:#4a5568;font-size:14px;cursor:pointer;-webkit-user-select:none;user-select:none}.btn-login[_ngcontent-%COMP%]{width:100%;padding:15px;background:linear-gradient(135deg,#90c,#609);color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center}.btn-login[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 15px 30px #6600994d}.btn-login[_ngcontent-%COMP%]:hover:before{left:100%}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-login[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.loading-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:10px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.forgot-password[_ngcontent-%COMP%]{text-align:center;margin-top:25px;padding-top:20px;border-top:1px solid #e2e8f0}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#90c;text-decoration:none;font-size:14px;font-weight:500;transition:all .3s;display:inline-flex;align-items:center}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#609;transform:translate(2px)}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.login-footer[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#f8f9fa;border-top:1px solid #e2e8f0}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:13px}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:10px}.login-card[_ngcontent-%COMP%]{margin:0;width:100%;max-width:none}.login-header[_ngcontent-%COMP%], .login-body[_ngcontent-%COMP%]{padding:30px 20px}.login-title[_ngcontent-%COMP%]{font-size:24px}.form-label[_ngcontent-%COMP%]{font-size:13px}.form-control[_ngcontent-%COMP%]{padding:12px 14px;font-size:14px}}.login-container[_ngcontent-%COMP%]:before{content:"";position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#609,#90c,#c0f);z-index:-1;pointer-events:none}.form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.input-wrapper[_ngcontent-%COMP%]{width:100%}.form-control[_ngcontent-%COMP%]{box-sizing:border-box}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}']})}}return o})();export{oe as LoginComponent};
