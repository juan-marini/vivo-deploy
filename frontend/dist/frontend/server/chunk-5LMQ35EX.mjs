import './polyfills.server.mjs';
import{a as H}from"./chunk-365NG5TY.mjs";import{b as L,d as N,f as R,j as W,k as j,l as B,n as q}from"./chunk-7FRDF5AI.mjs";import{a as V}from"./chunk-77RYRIC7.mjs";import"./chunk-TJ446NKF.mjs";import{O as i,Oa as T,P as _,Pa as I,Qa as F,X as g,Y as P,Z as u,_ as S,aa as w,ba as C,ca as t,da as a,ea as l,ha as y,hb as A,ja as b,ka as M,la as r,lb as z,ma as m,na as h,pa as f,qa as v,ra as x,t as D,ta as O,y as E,z as k}from"./chunk-NOQO3GIZ.mjs";import"./chunk-VVCT4QZE.mjs";function U(s,p){if(s&1&&(t(0,"option",51),r(1),a()),s&2){let e=p.$implicit;u("value",e),i(),m(e)}}function Q(s,p){if(s&1&&(t(0,"option",51),r(1),a()),s&2){let e=p.$implicit;u("value",e),i(),m(e)}}function J(s,p){if(s&1){let e=y();t(0,"div",52),b("click",function(){let n=E(e).$implicit,c=M();return k(c.openCollaboratorProgress(n))}),t(1,"div",53)(2,"div",30)(3,"div",54)(4,"div",55),l(5,"i",56),a(),t(6,"div")(7,"h6",57),r(8),a(),t(9,"p",17),r(10),a(),t(11,"p",17),r(12),a()()()(),t(13,"div",58)(14,"span",59),r(15),a()(),t(16,"div",60)(17,"div",54)(18,"div",61),l(19,"div",62),a(),t(20,"span",63),r(21),a()()()()()}if(s&2){let e=p.$implicit,o=M();i(8),m(e.name),i(2),m(e.role),i(2),h("In\xEDcio: ",e.startDate,""),i(2),C(o.getStatusClass(e.status)),i(),h(" ",e.status," "),i(4),C(o.getProgressBarClass(e.status)),S("width",e.progress,"%"),P("aria-valuenow",e.progress),i(2),h("",e.progress,"%")}}function K(s,p){s&1&&(t(0,"div",64),l(1,"i",65),t(2,"p",66),r(3,"Nenhum membro encontrado com os filtros aplicados."),a()())}function X(s,p){if(s&1&&(t(0,"div",67),l(1,"div",68),t(2,"span",69),r(3),a(),t(4,"span",70),r(5),a()()),s&2){let e=p.$implicit;i(),S("background-color",e.color),i(2),m(e.label),i(2),h("",e.value,"%")}}var le=(()=>{class s{constructor(e,o){this.dashboardService=e,this.router=o,this.selectedTeam="",this.selectedStatus="",this.selectedStartDate="",this.teams=["Desenvolvimento","Infraestrutura","Dados","Produto","Design","QA","Gest\xE3o"],this.statuses=["Conclu\xEDdo","Em andamento","N\xE3o iniciado","Atrasado"],this.teamMembers=[],this.chartData=[]}ngOnInit(){this.loadDashboardData(),setInterval(()=>{this.refreshDashboardDataSilent()},1e4)}loadDashboardData(){this.dashboardService.getTeamMembers().subscribe(e=>{this.teamMembers=e,this.updateChartData()})}refreshDashboardDataSilent(){this.dashboardService.refreshMemberProgress(),setTimeout(()=>{this.loadDashboardData()},1e3)}manualRefresh(){console.log("\u{1F504} Atualizando dados do dashboard manualmente..."),this.showRefreshFeedback(),this.dashboardService.refreshMemberProgress(),setTimeout(()=>{this.loadDashboardData(),this.updateChartData()},500)}showRefreshFeedback(){document.querySelectorAll("[data-refresh-btn]").forEach(o=>{let n=o.innerHTML;o.innerHTML='<i class="fas fa-spinner fa-spin me-2"></i>Atualizando...',setTimeout(()=>{o.innerHTML=n},2e3)})}updateChartData(){this.dashboardService.getChartData().subscribe(e=>{this.chartData=e})}get filteredMembers(){return this.teamMembers.filter(e=>{let o=!this.selectedTeam||e.team&&e.team.toLowerCase().includes(this.selectedTeam.toLowerCase()),n=!this.selectedStatus||e.status===this.selectedStatus,c=!this.selectedStartDate||e.startDate.includes(this.selectedStartDate);return o&&n&&c})}get totalMembers(){return this.teamMembers.length}get completedMembers(){return this.teamMembers.filter(e=>e.status==="Conclu\xEDdo").length}get inProgressMembers(){return this.teamMembers.filter(e=>e.status==="Em andamento").length}get delayedMembers(){return this.teamMembers.filter(e=>e.status==="Atrasado").length}getStatusClass(e){switch(e){case"Conclu\xEDdo":return"bg-success";case"Em andamento":return"bg-purple";case"Atrasado":return"bg-danger";default:return"bg-secondary"}}getProgressBarClass(e){switch(e){case"Conclu\xEDdo":return"bg-success";case"Em andamento":return"progress-bar-purple";case"Atrasado":return"bg-danger";default:return"bg-secondary"}}clearFilters(){this.selectedTeam="",this.selectedStatus="",this.selectedStartDate=""}updateMemberProgress(e,o){console.log("Progresso atualizado via backend para:",e,o),this.dashboardService.refreshMemberProgress()}simulateProgressUpdate(){console.log("\u{1F504} Atualizando progresso dos membros..."),this.showRefreshFeedback(),this.dashboardService.refreshMemberProgress(),setTimeout(()=>{this.loadDashboardData(),this.updateChartData()},500),setTimeout(()=>{console.log("\u2705 Dados atualizados com sucesso!")},1500)}openCollaboratorProgress(e){this.router.navigate(["/collaborator",e.id])}resetAllData(){confirm("\u26A0\uFE0F ATEN\xC7\xC3O: Isso ir\xE1 resetar o progresso de TODOS os colaboradores e apagar todos os dados de estudo. Esta a\xE7\xE3o n\xE3o pode ser desfeita. Deseja continuar?")&&(this.dashboardService.resetAllMembersData(),setTimeout(()=>{this.loadDashboardData(),this.updateChartData(),alert("\u2705 Todos os dados foram resetados com sucesso! Todos os colaboradores agora t\xEAm 0% de progresso.")},100))}getPieChartStyle(){if(!this.chartData||this.chartData.length===0)return{};let e=0,o=[];return this.chartData.forEach((n,c)=>{let d=e;e+=n.value;let Y=e,G=d*3.6,$=Y*3.6;o.push(`${n.color} ${G}deg ${$}deg`)}),{background:`conic-gradient(${o.join(", ")})`}}static{this.\u0275fac=function(o){return new(o||s)(_(H),_(A))}}static{this.\u0275cmp=D({type:s,selectors:[["app-dashboard"]],standalone:!0,features:[O],decls:93,vars:15,consts:[[1,"min-vh-100","vivo-gradient"],[1,"container-fluid","py-5",2,"background","var(--gray-50)"],[1,"row","justify-content-center"],[1,"col-12",2,"max-width","1400px"],[1,"professional-card"],[1,"mb-5"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"title-corporate","h2","d-flex","align-items-center","mb-0"],[1,"fas","fa-tachometer-alt","me-3",2,"color","var(--vivo-purple)"],["data-refresh-btn","",1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"fas","fa-sync-alt","me-2"],[1,"row","g-3","mb-4"],[1,"col-6","col-md-3"],[1,"stat-card","p-3","rounded-3","text-center"],[1,"stat-icon","mb-2"],[1,"fas","fa-users","text-purple"],[1,"h5","fw-bold","text-dark","mb-1"],[1,"small","text-muted","mb-0"],[1,"fas","fa-check-circle","text-success"],[1,"fas","fa-clock","text-warning"],[1,"fas","fa-exclamation-triangle","text-danger"],[1,"row","g-4"],[1,"col-12","col-lg-8"],[1,"filters-section","mb-4"],[1,"h5","fw-bold","text-dark","mb-0"],["title","Atualizar dados do progresso","data-refresh-btn","",1,"btn-vivo-secondary","btn-sm","me-2",3,"click"],[1,"fas","fa-sync-alt","me-1"],["title","Resetar todos os estudos",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt","me-1"],[1,"row","g-3"],[1,"col-12","col-md-4"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","gap-2"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["title","Limpar filtros",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-times"],[1,"team-list"],[1,"h5","fw-bold","text-dark","mb-3"],["class","member-card p-3 rounded-3 mb-3 clickable","title","Clique para ver desenvolvimento individual",3,"click",4,"ngFor","ngForOf"],["class","text-center py-4",4,"ngIf"],[1,"col-12","col-lg-4"],[1,"chart-section"],[1,"chart-container"],[1,"pie-chart","mx-auto","mb-4"],[1,"pie-center"],[1,"h6","fw-bold","text-dark"],[1,"text-muted","d-block"],[1,"chart-legend"],["class","legend-item d-flex align-items-center mb-2",4,"ngFor","ngForOf"],[3,"value"],["title","Clique para ver desenvolvimento individual",1,"member-card","p-3","rounded-3","mb-3","clickable",3,"click"],[1,"row","align-items-center"],[1,"d-flex","align-items-center"],[1,"member-avatar","me-3"],[1,"fas","fa-user-circle","text-purple"],[1,"fw-bold","text-dark","mb-1"],[1,"col-12","col-md-3","mt-2","mt-md-0"],[1,"badge"],[1,"col-12","col-md-5","mt-2","mt-md-0"],[1,"progress","flex-grow-1","me-3"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"fw-bold","text-dark","small"],[1,"text-center","py-4"],[1,"fas","fa-users","text-muted","mb-3",2,"font-size","2rem"],[1,"text-muted"],[1,"legend-item","d-flex","align-items-center","mb-2"],[1,"legend-color","me-2"],[1,"small","text-dark"],[1,"small","text-muted","ms-auto"]],template:function(o,n){o&1&&(t(0,"div",0),l(1,"app-header"),t(2,"main",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h2",7),l(9,"i",8),r(10," Dashboard do Gestor "),a(),t(11,"button",9),b("click",function(){return n.manualRefresh()}),l(12,"i",10),r(13,"Atualizar Dados "),a()(),t(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),l(18,"i",15),a(),t(19,"h4",16),r(20),a(),t(21,"p",17),r(22,"Total de Membros"),a()()(),t(23,"div",12)(24,"div",13)(25,"div",14),l(26,"i",18),a(),t(27,"h4",16),r(28),a(),t(29,"p",17),r(30,"Conclu\xEDdos"),a()()(),t(31,"div",12)(32,"div",13)(33,"div",14),l(34,"i",19),a(),t(35,"h4",16),r(36),a(),t(37,"p",17),r(38,"Em Andamento"),a()()(),t(39,"div",12)(40,"div",13)(41,"div",14),l(42,"i",20),a(),t(43,"h4",16),r(44),a(),t(45,"p",17),r(46,"Atrasados"),a()()()()(),t(47,"div",21)(48,"div",22)(49,"div",23)(50,"div",6)(51,"h4",24),r(52,"Filtros"),a(),t(53,"button",25),b("click",function(){return n.simulateProgressUpdate()}),l(54,"i",26),r(55,"Atualizar Dados "),a(),t(56,"button",27),b("click",function(){return n.resetAllData()}),l(57,"i",28),r(58,"Reset Geral "),a()(),t(59,"div",29)(60,"div",30)(61,"select",31),x("ngModelChange",function(d){return v(n.selectedTeam,d)||(n.selectedTeam=d),d}),t(62,"option",32),r(63,"Todas as Equipes"),a(),g(64,U,2,2,"option",33),a()(),t(65,"div",30)(66,"select",31),x("ngModelChange",function(d){return v(n.selectedStatus,d)||(n.selectedStatus=d),d}),t(67,"option",32),r(68,"Todos os Status"),a(),g(69,Q,2,2,"option",33),a()(),t(70,"div",30)(71,"div",34)(72,"input",35),x("ngModelChange",function(d){return v(n.selectedStartDate,d)||(n.selectedStartDate=d),d}),a(),t(73,"button",36),b("click",function(){return n.clearFilters()}),l(74,"i",37),a()()()()(),t(75,"div",38)(76,"h4",39),r(77,"Membros da Equipe"),a(),g(78,J,22,12,"div",40)(79,K,4,0,"div",41),a()(),t(80,"div",42)(81,"div",43)(82,"h4",39),r(83,"Distribui\xE7\xE3o de Status"),a(),t(84,"div",44)(85,"div",45)(86,"div",46)(87,"span",47),r(88),a(),t(89,"small",48),r(90,"Total"),a()()(),t(91,"div",49),g(92,X,6,4,"div",50),a()()()()()()()()()()),o&2&&(i(20),m(n.totalMembers),i(8),m(n.completedMembers),i(8),m(n.inProgressMembers),i(8),m(n.delayedMembers),i(17),f("ngModel",n.selectedTeam),i(3),u("ngForOf",n.teams),i(2),f("ngModel",n.selectedStatus),i(3),u("ngForOf",n.statuses),i(3),f("ngModel",n.selectedStartDate),i(6),u("ngForOf",n.filteredMembers),i(),u("ngIf",n.filteredMembers.length===0),i(6),w(n.getPieChartStyle()),i(3),m(n.totalMembers),i(4),u("ngForOf",n.chartData))},dependencies:[F,T,I,z,q,j,B,L,W,N,R,V],styles:['.vivo-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed,#6d28d9)}.vivo-logo[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px}.text-purple[_ngcontent-%COMP%]{color:#8b5cf6!important}.btn-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);border:none;color:#fff;font-weight:500}.btn-purple[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7c3aed,#6d28d9);color:#fff}.btn-outline-purple[_ngcontent-%COMP%]{border:2px solid #8B5CF6;color:#8b5cf6;background:transparent;font-weight:500}.btn-outline-purple[_ngcontent-%COMP%]:hover{background:#8b5cf6;color:#fff;border-color:#8b5cf6}.bg-purple[_ngcontent-%COMP%]{background-color:#8b5cf6!important}.stat-card[_ngcontent-%COMP%]{background:#ffffffe6;border:1px solid rgba(139,92,246,.1);transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{border-color:#8b5cf64d;transform:translateY(-2px);box-shadow:0 4px 15px #8b5cf61a}.stat-icon[_ngcontent-%COMP%]{font-size:1.5rem}.filters-section[_ngcontent-%COMP%]{background:#8b5cf60d;border-radius:12px;padding:1.5rem;border:1px solid rgba(139,92,246,.1)}.member-card[_ngcontent-%COMP%]{background:#fffc;border:1px solid rgba(139,92,246,.1);transition:all .3s ease}.member-card[_ngcontent-%COMP%]:hover{border-color:#8b5cf64d;transform:translateY(-1px);box-shadow:0 4px 15px #8b5cf61a}.member-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.member-card.clickable[_ngcontent-%COMP%]:hover{border-color:#8b5cf680;transform:translateY(-3px);box-shadow:0 8px 25px #8b5cf626}.member-card.clickable[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #8b5cf633}.member-avatar[_ngcontent-%COMP%]{font-size:2rem}.progress-bar-purple[_ngcontent-%COMP%]{background:linear-gradient(90deg,#8b5cf6,#7c3aed)}.chart-section[_ngcontent-%COMP%]{background:#8b5cf60d;border-radius:12px;padding:1.5rem;border:1px solid rgba(139,92,246,.1);height:fit-content}.pie-chart[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;position:relative;background:#f3f4f6;display:flex;align-items:center;justify-content:center}.pie-chart[_ngcontent-%COMP%]:before{content:"";position:absolute;width:80px;height:80px;background:#fff;border-radius:50%}.pie-center[_ngcontent-%COMP%]{position:relative;z-index:1;text-align:center}.legend-color[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:2px}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#8b5cf6;box-shadow:0 0 0 .2rem #8b5cf640}.nav-link[_ngcontent-%COMP%]{text-decoration:none;transition:color .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#8b5cf6!important}.nav-link.active[_ngcontent-%COMP%]{color:#8b5cf6!important;font-weight:600}.rounded-4[_ngcontent-%COMP%]{border-radius:1rem!important}']})}}return s})();export{le as DashboardComponent};
