import{a as G}from"./chunk-EDXIHIZB.js";import{b as L,d as U,f as V,j,k as N,l as W,n as B}from"./chunk-I462REB3.js";import{a as z,b as R}from"./chunk-JBQB75WB.js";import{A as T,Ha as H,I as a,J as f,Ka as A,Na as D,R as g,T as m,X as b,Y as t,Z as i,_ as l,ba as S,da as h,ea as v,fa as s,ga as _,ha as u,ja as M,ka as w,la as k,na as O,oa as E,u as y,va as P,wa as I,xa as F,z as x}from"./chunk-M3B3BEQ4.js";var Q=r=>["/topic",r];function Y(r,c){if(r&1&&(t(0,"option",30),s(1),i()),r&2){let e=c.$implicit;m("value",e),a(),_(e)}}function $(r,c){if(r&1){let e=S();t(0,"button",31),h("click",function(){let o=x(e).$implicit,p=v();return T(p.selectedTag=p.selectedTag===o?"":o)}),s(1),i()}if(r&2){let e=c.$implicit,n=v();b(n.selectedTag===e?"btn-purple":"btn-outline-secondary"),a(),u(" ",e," ")}}function q(r,c){r&1&&(t(0,"span",47),l(1,"i",48),s(2,"Conclu\xEDdo "),i())}function J(r,c){if(r&1&&(t(0,"span",49),s(1),i()),r&2){let e=c.$implicit;a(),u(" ",e," ")}}function K(r,c){if(r&1&&(t(0,"div",32)(1,"div",33)(2,"div",34)(3,"h5",35),s(4),i(),g(5,q,3,0,"span",36),i(),t(6,"p",37),s(7),i(),t(8,"div",38),g(9,J,2,1,"span",39),i(),t(10,"div",40)(11,"span"),l(12,"i",41),s(13),i(),t(14,"span"),l(15,"i",42),s(16),i(),t(17,"span"),l(18,"i",43),s(19),i()(),t(20,"div",44)(21,"button",45),l(22,"i",46),s(23),i()()()()),r&2){let e=c.$implicit;a(4),_(e.title),a(),m("ngIf",e.isCompleted),a(2),_(e.description),a(2),m("ngForOf",e.tags),a(4),u("",e.docsCount," docs"),a(3),u("",e.linksCount," links"),a(3),u("",e.contactsCount," contatos"),a(2),b(e.isCompleted?"btn-outline-success":"btn-purple"),m("routerLink",E(13,Q,e.id)),a(),b(e.isCompleted?"fa-eye":"fa-arrow-right"),a(),u(" ",e.isCompleted?"Revisar":"Estudar"," ")}}function X(r,c){if(r&1){let e=S();t(0,"div",50),l(1,"i",51),t(2,"h5",52),s(3,"Nenhum t\xF3pico encontrado"),i(),t(4,"p",52),s(5,"Tente ajustar os filtros de busca."),i(),t(6,"button",53),h("click",function(){x(e);let o=v();return T(o.clearSearch())}),s(7," Limpar Filtros "),i()()}}var de=(()=>{class r{constructor(e,n,o){this.topicService=e,this.progressService=n,this.authService=o,this.searchTerm="",this.selectedTag="",this.tags=[],this.topics=[],this.progressStats={completed:0,total:0,percentage:0}}ngOnInit(){this.loadUserTopics(),this.loadProgressStats(),this.loadAvailableCategories()}loadUserTopics(){let n=this.authService.currentUserValue?.email||"default";this.topicService.loadUserTopics(n),this.loadTopics()}loadProgressStats(){this.progressService.getProgressStats().subscribe(e=>{this.progressStats=e})}loadTopics(){this.topicService.getTopics().subscribe(e=>{this.topics=e.map(n=>({id:n.id,title:n.title,description:n.description,tags:[n.category],docsCount:n.documents.length,linksCount:n.links.length,contactsCount:n.contacts.length,isCompleted:n.isCompleted}))})}get filteredTopics(){return this.topics.filter(e=>{let n=!this.searchTerm||e.title.toLowerCase().includes(this.searchTerm.toLowerCase())||e.description.toLowerCase().includes(this.searchTerm.toLowerCase()),o=!this.selectedTag||e.tags.includes(this.selectedTag);return n&&o})}clearSearch(){this.searchTerm="",this.selectedTag=""}loadAvailableCategories(){this.topicService.getAvailableCategories().subscribe(e=>{this.tags=e})}filterByCategory(e){this.selectedTag=this.selectedTag===e?"":e}getUserAreaTopics(){let e=this.authService.currentUserValue;if(!e?.perfil)return this.filteredTopics;let o={Desenvolvimento:"Desenvolvimento",Infraestrutura:"Infraestrutura",QA:"QA",Produto:"Produto",Dados:"Dados",Design:"Design",Gest\u00E3o:"Gest\xE3o"}[e.perfil];if(!o)return this.filteredTopics;let p=this.filteredTopics.filter(C=>C.tags.includes(o)),d=this.filteredTopics.filter(C=>!C.tags.includes(o));return[...p,...d]}static{this.\u0275fac=function(n){return new(n||r)(f(R),f(G),f(D))}}static{this.\u0275cmp=y({type:r,selectors:[["app-home"]],standalone:!0,features:[O],decls:34,vars:6,consts:[[1,"min-vh-100","vivo-gradient"],[1,"container-fluid","py-4"],[1,"row","justify-content-center"],[1,"col-12"],[1,"bg-white","rounded-4","shadow-lg","p-4","p-md-5"],[1,"mb-5"],[1,"h3","fw-bold","text-dark","mb-4","d-flex","align-items-center"],[1,"fas","fa-database","text-purple","me-3"],[1,"search-section","mb-4"],[1,"row","g-3"],[1,"col-12","col-md-8"],[1,"input-group"],[1,"input-group-text","bg-light","border-end-0"],[1,"fas","fa-search","text-muted"],["type","text","placeholder","Buscar por tag, tema...",1,"form-control","border-start-0",3,"ngModelChange","ngModel"],[1,"col-12","col-md-4"],[1,"d-flex","gap-2"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["title","Limpar busca",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-times"],[1,"mt-3"],[1,"d-flex","flex-wrap","gap-2"],["class","btn btn-sm",3,"class","click",4,"ngFor","ngForOf"],[1,"topics-grid"],[1,"h5","fw-bold","text-dark","mb-3"],[1,"row","g-4"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],["class","text-center py-5",4,"ngIf"],[3,"value"],[1,"btn","btn-sm",3,"click"],[1,"col-12","col-md-6","col-lg-4"],[1,"topic-card","p-4","rounded-3","h-100","position-relative"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"fw-bold","text-dark","mb-0"],["class","badge bg-success",4,"ngIf"],[1,"text-muted","mb-3"],[1,"mb-3"],["class","badge bg-light text-dark me-1 mb-1",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","text-muted","small","mb-3"],[1,"fas","fa-file-alt","me-1"],[1,"fas","fa-link","me-1"],[1,"fas","fa-user","me-1"],[1,"mt-auto"],[1,"btn","w-100",3,"routerLink"],[1,"fas"],[1,"badge","bg-success"],[1,"fas","fa-check","me-1"],[1,"badge","bg-light","text-dark","me-1","mb-1"],[1,"text-center","py-5"],[1,"fas","fa-search","text-muted","mb-3",2,"font-size","3rem"],[1,"text-muted"],[1,"btn","btn-outline-purple",3,"click"]],template:function(n,o){n&1&&(t(0,"div",0),l(1,"app-header"),t(2,"main",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2",6),l(8,"i",7),s(9," Tela Inicial "),i(),t(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),l(15,"i",13),i(),t(16,"input",14),k("ngModelChange",function(d){return w(o.searchTerm,d)||(o.searchTerm=d),d}),i()()(),t(17,"div",15)(18,"div",16)(19,"select",17),k("ngModelChange",function(d){return w(o.selectedTag,d)||(o.selectedTag=d),d}),t(20,"option",18),s(21,"Todas as tags"),i(),g(22,Y,2,2,"option",19),i(),t(23,"button",20),h("click",function(){return o.clearSearch()}),l(24,"i",21),i()()()(),t(25,"div",22)(26,"div",23),g(27,$,2,3,"button",24),i()()()(),t(28,"div",25)(29,"h4",26),s(30,"T\xF3picos Dispon\xEDveis"),i(),t(31,"div",27),g(32,K,24,15,"div",28),i(),g(33,X,8,0,"div",29),i()()()()()()),n&2&&(a(16),M("ngModel",o.searchTerm),a(3),M("ngModel",o.selectedTag),a(3),m("ngForOf",o.tags),a(5),m("ngForOf",o.tags),a(5),m("ngForOf",o.getUserAreaTopics()),a(),m("ngIf",o.getUserAreaTopics().length===0))},dependencies:[F,P,I,A,H,B,N,W,L,j,U,V,z],styles:[".vivo-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed,#6d28d9)}.vivo-logo[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px}.text-purple[_ngcontent-%COMP%]{color:#8b5cf6!important}.btn-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);border:none;color:#fff;font-weight:500}.btn-purple[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7c3aed,#6d28d9);color:#fff}.btn-outline-purple[_ngcontent-%COMP%]{border:2px solid #8B5CF6;color:#8b5cf6;background:transparent;font-weight:500}.btn-outline-purple[_ngcontent-%COMP%]:hover{background:#8b5cf6;color:#fff;border-color:#8b5cf6}.nav-link[_ngcontent-%COMP%]{text-decoration:none;transition:color .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#8b5cf6!important}.nav-link.active[_ngcontent-%COMP%]{color:#8b5cf6!important;font-weight:600}.search-section[_ngcontent-%COMP%]{background:#8b5cf60d;border-radius:12px;padding:1.5rem;border:1px solid rgba(139,92,246,.1)}.topic-card[_ngcontent-%COMP%]{background:#ffffffe6;border:1px solid rgba(139,92,246,.1);transition:all .3s ease;display:flex;flex-direction:column}.topic-card[_ngcontent-%COMP%]:hover{border-color:#8b5cf64d;transform:translateY(-2px);box-shadow:0 4px 15px #8b5cf61a}.input-group-text[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-color:#dee2e6}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#8b5cf6;box-shadow:0 0 0 .2rem #8b5cf640}.btn-sm[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:.875rem}.rounded-4[_ngcontent-%COMP%]{border-radius:1rem!important}"]})}}return r})();export{de as HomeComponent};
