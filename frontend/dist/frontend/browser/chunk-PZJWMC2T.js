import{a as V,b as A}from"./chunk-JBQB75WB.js";import{A as v,Ea as O,Ga as D,Ha as M,I as a,J as h,Ka as P,Na as F,R as p,T as m,Y as n,Z as t,_ as l,ba as x,da as g,ea as u,fa as c,ga as f,ha as _,na as E,o as C,r as k,u as w,va as T,wa as S,xa as I,ya as y,z as b}from"./chunk-M3B3BEQ4.js";var U=(()=>{class i{constructor(e){this.http=e}downloadFileDirectly(e){console.log("\u{1F504} For\xE7ando download real do arquivo:",e);let o=`http://localhost:5000/api/file/download/${e}`;console.log("\u{1F4E5} URL da API de download:",o),this.downloadViaBlob(o,e)}downloadViaBlob(e,o){console.log("\u{1F4BE} Baixando via blob para for\xE7ar download..."),this.http.get(e,{responseType:"blob",observe:"response"}).subscribe({next:r=>{console.log("\u2705 Arquivo baixado como blob:",r.status),r.body?this.saveFileToComputer(r.body,o):(console.error("\u274C Blob vazio recebido"),this.fallbackDirectDownload(e,o))},error:r=>{console.error("\u274C Erro no download via blob:",r),this.fallbackDirectDownload(e,o)}})}saveFileToComputer(e,o){console.log("\u{1F4BE} Salvando arquivo no computador:",o);try{let r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=o,s.style.display="none",document.body.appendChild(s),s.click(),setTimeout(()=>{document.body.removeChild(s),window.URL.revokeObjectURL(r),console.log("\u2705 Download conclu\xEDdo e recursos limpos")},100)}catch(r){console.error("\u274C Erro ao salvar arquivo:",r),this.fallbackDirectDownload(`http://localhost:5000/api/file/download/${o}`,o)}}fallbackDirectDownload(e,o){console.log("\u{1F504} Usando fallback: window.location.href");try{window.location.href=e,console.log("\u2705 Fallback executado")}catch(r){console.error("\u274C Erro no fallback:",r),alert(`Erro no download. Tente acessar diretamente: ${e}`)}}static{this.\u0275fac=function(o){return new(o||i)(k(y))}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function $(i,d){i&1&&(n(0,"span",35),l(1,"i",36),c(2,"Conclu\xEDdo "),t())}function z(i,d){if(i&1){let e=x();n(0,"button",37),g("click",function(){b(e);let r=u(2);return v(r.markAsCompleted())}),l(1,"i",38),c(2,"Marcar como Conclu\xEDdo "),t()}}function B(i,d){i&1&&l(0,"i",49)}function q(i,d){i&1&&l(0,"i",50)}function N(i,d){if(i&1&&(n(0,"small",51),c(1),t()),i&2){let e=u().$implicit;a(),f(e.size)}}function H(i,d){if(i&1){let e=x();n(0,"div",39)(1,"div",40)(2,"div",41),p(3,B,1,0,"i",42)(4,q,1,0,"i",43),t(),n(5,"div",44)(6,"h6",45),c(7),t(),p(8,N,2,1,"small",46),t(),n(9,"button",47),g("click",function(){let r=b(e).$implicit,s=u(2);return v(s.downloadDocument(r))}),l(10,"i",48),t()()()}if(i&2){let e=d.$implicit;a(3),m("ngIf",e.type==="pdf"),a(),m("ngIf",e.type==="doc"),a(3),f(e.title),a(),m("ngIf",e.size)}}function G(i,d){i&1&&(n(0,"div",52),l(1,"i",53),n(2,"p",54),c(3,"Nenhum documento dispon\xEDvel"),t()())}function Y(i,d){if(i&1){let e=x();n(0,"div",55)(1,"div",40)(2,"div",56),l(3,"i",57),t(),n(4,"div",44)(5,"h6",58),c(6),t()(),n(7,"button",59),g("click",function(){let r=b(e).$implicit,s=u(2);return v(s.openLink(r))}),l(8,"i",60),t()()()}if(i&2){let e=d.$implicit;a(6),f(e.title)}}function J(i,d){i&1&&(n(0,"div",52),l(1,"i",61),n(2,"p",54),c(3,"Nenhum link dispon\xEDvel"),t()())}function K(i,d){if(i&1){let e=x();n(0,"div",62)(1,"div",63)(2,"div",64),l(3,"i",65),t(),n(4,"div",44)(5,"h6",45),c(6),t(),n(7,"p",66),c(8),t(),n(9,"p",66),c(10),t(),n(11,"div",67)(12,"small",68),l(13,"i",69),c(14),t(),n(15,"small",68),l(16,"i",70),c(17),t()(),n(18,"button",71),g("click",function(){let r=b(e).$implicit,s=u(2);return v(s.contactPerson(r))}),l(19,"i",69),c(20,"Contatar "),t()()()()}if(i&2){let e=d.$implicit;a(6),f(e.name),a(2),f(e.role),a(2),f(e.department),a(4),_("",e.email," "),a(3),_("",e.phone," ")}}function Q(i,d){i&1&&(n(0,"div",52),l(1,"i",72),n(2,"p",54),c(3,"Nenhum contato dispon\xEDvel"),t()())}function W(i,d){if(i&1){let e=x();n(0,"div",73)(1,"div",74)(2,"h5",75),c(3,"Pronto para concluir este t\xF3pico?"),t(),n(4,"p",76),c(5," Ap\xF3s estudar todos os materiais e entrar em contato com as refer\xEAncias necess\xE1rias, marque este t\xF3pico como conclu\xEDdo. "),t(),n(6,"button",77),g("click",function(){b(e);let r=u(2);return v(r.markAsCompleted())}),l(7,"i",38),c(8,"Marcar como Conclu\xEDdo "),t()()()}}function X(i,d){if(i&1&&(n(0,"div",73)(1,"div",78),l(2,"i",79),n(3,"h5",80),c(4,"T\xF3pico Conclu\xEDdo!"),t(),n(5,"p",76),c(6),t(),n(7,"button",81),l(8,"i",82),c(9,"Ver Meu Progresso "),t()()()),i&2){let e=u(2);a(6),_(" Parab\xE9ns! Voc\xEA concluiu com sucesso o estudo de ",e.topic.title,". ")}}function Z(i,d){if(i&1){let e=x();n(0,"main",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"button",7),g("click",function(){b(e);let r=u();return v(r.goBack())}),l(6,"i",8),c(7,"Voltar "),t()(),n(8,"div",9)(9,"div",10)(10,"div")(11,"h2",11),l(12,"i",12),c(13),t(),n(14,"div",13)(15,"span",14),c(16),t(),n(17,"span",15),l(18,"i",16),c(19),t(),p(20,$,3,0,"span",17),t()(),p(21,z,3,0,"button",18),t(),n(22,"p",19),c(23),t()(),n(24,"div",20)(25,"div",21)(26,"div",22)(27,"h4",23),l(28,"i",24),c(29),t(),n(30,"div",25),p(31,H,11,4,"div",26),t(),p(32,G,4,0,"div",27),t()(),n(33,"div",21)(34,"div",22)(35,"h4",23),l(36,"i",28),c(37),t(),n(38,"div",29),p(39,Y,9,1,"div",30),t(),p(40,J,4,0,"div",27),t()(),n(41,"div",21)(42,"div",22)(43,"h4",23),l(44,"i",31),c(45),t(),n(46,"div",32),p(47,K,21,5,"div",33),t(),p(48,Q,4,0,"div",27),t()()(),p(49,W,9,0,"div",34)(50,X,10,1,"div",34),t()()()()}if(i&2){let e=u();a(13),_(" ",e.topic.title," "),a(3),f(e.topic.category),a(3),_("",e.topic.estimatedTime," "),a(),m("ngIf",e.topic.isCompleted),a(),m("ngIf",!e.topic.isCompleted),a(2),f(e.topic.description),a(6),_(" Documentos (",e.topic.documents.length,") "),a(2),m("ngForOf",e.topic.documents),a(),m("ngIf",e.topic.documents.length===0),a(5),_(" Links \xDAteis (",e.topic.links.length,") "),a(2),m("ngForOf",e.topic.links),a(),m("ngIf",e.topic.links.length===0),a(5),_(" Contatos de Refer\xEAncia (",e.topic.contacts.length,") "),a(2),m("ngForOf",e.topic.contacts),a(),m("ngIf",e.topic.contacts.length===0),a(),m("ngIf",!e.topic.isCompleted),a(),m("ngIf",e.topic.isCompleted)}}function ee(i,d){i&1&&(n(0,"main",2)(1,"div",3)(2,"div",83)(3,"div",84),l(4,"i",85),n(5,"h3",75),c(6,"T\xF3pico n\xE3o encontrado"),t(),n(7,"p",76),c(8,"O t\xF3pico que voc\xEA est\xE1 procurando n\xE3o existe ou foi removido."),t(),n(9,"button",86),l(10,"i",87),c(11,"Voltar ao In\xEDcio "),t()()()()())}var de=(()=>{class i{constructor(e,o,r,s,j){this.route=e,this.router=o,this.topicService=r,this.authService=s,this.fileDownloadService=j,this.topicId=0,this.topic=null}ngOnInit(){this.route.params.subscribe(e=>{this.topicId=+e.id,this.loadUserTopics()})}loadUserTopics(){let o=this.authService.currentUserValue?.email||"default";this.topicService.loadUserTopics(o),this.loadTopic()}loadTopic(){this.topicService.getTopicById(this.topicId).subscribe(e=>{this.topic=e,this.topic||this.router.navigate(["/home"])})}markAsCompleted(){if(this.topic){let o=this.authService.currentUserValue?.email||"default";this.topicService.markTopicAsCompleted(this.topic.id,o),this.topic.isCompleted=!0,console.log("T\xF3pico marcado como conclu\xEDdo:",this.topic.title,"para usu\xE1rio:",o)}}downloadDocument(e){console.log("\u{1F53D} Download iniciado:",e.title),console.log("\u{1F4C4} Documento:",e);let o="";e.title.includes(".NET Core")||e.title.includes("Guia .NET Core")?o="dotnet-core-documentation.pdf":e.title.includes("ASP.NET")?o="aspnet-core-tutorial.pdf":o="exemplo-documento.pdf",console.log("\u{1F4CE} Arquivo a ser baixado:",o),this.fileDownloadService.downloadFileDirectly(o)}openLink(e){console.log("Abrindo link:",e.title),window.open(e.url,"_blank")}contactPerson(e){console.log("Entrando em contato com:",e.name)}goBack(){this.router.navigate(["/home"])}static{this.\u0275fac=function(o){return new(o||i)(h(O),h(D),h(A),h(F),h(U))}}static{this.\u0275cmp=w({type:i,selectors:[["app-topic"]],standalone:!0,features:[E],decls:4,vars:2,consts:[[1,"min-vh-100","vivo-gradient"],["class","container-fluid py-4",4,"ngIf"],[1,"container-fluid","py-4"],[1,"row","justify-content-center"],[1,"col-12"],[1,"bg-white","rounded-4","shadow-lg","p-4","p-md-5"],[1,"mb-4"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left","me-2"],[1,"mb-5"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"h3","fw-bold","text-dark","mb-2","d-flex","align-items-center"],[1,"fas","fa-file-alt","text-purple","me-3"],[1,"d-flex","gap-3","mb-3"],[1,"badge","bg-light","text-dark"],[1,"badge","bg-info","text-white"],[1,"fas","fa-clock","me-1"],["class","badge bg-success",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"text-muted","fs-5"],[1,"row","g-4"],[1,"col-12","col-lg-4"],[1,"section-card","p-4","rounded-3","h-100"],[1,"h5","fw-bold","text-dark","mb-3","d-flex","align-items-center"],[1,"fas","fa-folder","text-primary","me-2"],[1,"documents-list"],["class","document-item p-3 rounded-2 mb-3",4,"ngFor","ngForOf"],["class","text-center py-3",4,"ngIf"],[1,"fas","fa-link","text-info","me-2"],[1,"links-list"],["class","link-item p-3 rounded-2 mb-3",4,"ngFor","ngForOf"],[1,"fas","fa-users","text-success","me-2"],[1,"contacts-list"],["class","contact-item p-3 rounded-2 mb-3",4,"ngFor","ngForOf"],["class","mt-5 text-center",4,"ngIf"],[1,"badge","bg-success"],[1,"fas","fa-check","me-1"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-check","me-2"],[1,"document-item","p-3","rounded-2","mb-3"],[1,"d-flex","align-items-center"],[1,"doc-icon","me-3"],["class","fas fa-file-pdf text-danger",4,"ngIf"],["class","fas fa-file-word text-primary",4,"ngIf"],[1,"flex-grow-1"],[1,"fw-bold","text-dark","mb-1"],["class","text-muted",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-download"],[1,"fas","fa-file-pdf","text-danger"],[1,"fas","fa-file-word","text-primary"],[1,"text-muted"],[1,"text-center","py-3"],[1,"fas","fa-folder-open","text-muted","mb-2"],[1,"text-muted","small"],[1,"link-item","p-3","rounded-2","mb-3"],[1,"link-icon","me-3"],[1,"fas","fa-external-link-alt","text-info"],[1,"fw-bold","text-dark","mb-0"],[1,"btn","btn-sm","btn-outline-info",3,"click"],[1,"fas","fa-external-link-alt"],[1,"fas","fa-link","text-muted","mb-2"],[1,"contact-item","p-3","rounded-2","mb-3"],[1,"d-flex","align-items-start"],[1,"contact-avatar","me-3"],[1,"fas","fa-user-circle","text-success",2,"font-size","2rem"],[1,"text-muted","small","mb-1"],[1,"contact-info"],[1,"text-muted","d-block"],[1,"fas","fa-envelope","me-1"],[1,"fas","fa-phone","me-1"],[1,"btn","btn-sm","btn-outline-success","mt-2",3,"click"],[1,"fas","fa-user-friends","text-muted","mb-2"],[1,"mt-5","text-center"],[1,"action-section","p-4","rounded-3"],[1,"fw-bold","text-dark","mb-3"],[1,"text-muted","mb-4"],[1,"btn","btn-purple","btn-lg",3,"click"],[1,"completion-section","p-4","rounded-3"],[1,"fas","fa-trophy","text-warning","mb-3",2,"font-size","3rem"],[1,"fw-bold","text-success","mb-3"],["routerLink","/progresso",1,"btn","btn-outline-purple"],[1,"fas","fa-chart-line","me-2"],[1,"col-12","col-md-6"],[1,"bg-white","rounded-4","shadow-lg","p-5","text-center"],[1,"fas","fa-exclamation-triangle","text-warning","mb-3",2,"font-size","3rem"],["routerLink","/home",1,"btn","btn-purple"],[1,"fas","fa-home","me-2"]],template:function(o,r){o&1&&(n(0,"div",0),l(1,"app-header"),p(2,Z,51,17,"main",1)(3,ee,12,0,"main",1),t()),o&2&&(a(2),m("ngIf",r.topic),a(),m("ngIf",!r.topic))},dependencies:[I,T,S,P,M,V],styles:[".vivo-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed,#6d28d9)}.vivo-logo[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px}.text-purple[_ngcontent-%COMP%]{color:#8b5cf6!important}.btn-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);border:none;color:#fff;font-weight:500}.btn-purple[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7c3aed,#6d28d9);color:#fff}.btn-outline-purple[_ngcontent-%COMP%]{border:2px solid #8B5CF6;color:#8b5cf6;background:transparent;font-weight:500}.btn-outline-purple[_ngcontent-%COMP%]:hover{background:#8b5cf6;color:#fff;border-color:#8b5cf6}.nav-link[_ngcontent-%COMP%]{text-decoration:none;transition:color .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#8b5cf6!important}.nav-link.active[_ngcontent-%COMP%]{color:#8b5cf6!important;font-weight:600}.section-card[_ngcontent-%COMP%]{background:#8b5cf60d;border:1px solid rgba(139,92,246,.1);transition:all .3s ease}.section-card[_ngcontent-%COMP%]:hover{border-color:#8b5cf633}.document-item[_ngcontent-%COMP%], .link-item[_ngcontent-%COMP%], .contact-item[_ngcontent-%COMP%]{background:#fffc;border:1px solid rgba(139,92,246,.1);transition:all .3s ease}.document-item[_ngcontent-%COMP%]:hover, .link-item[_ngcontent-%COMP%]:hover, .contact-item[_ngcontent-%COMP%]:hover{border-color:#8b5cf64d;transform:translateY(-1px);box-shadow:0 2px 8px #8b5cf61a}.doc-icon[_ngcontent-%COMP%], .link-icon[_ngcontent-%COMP%]{font-size:1.2rem}.contact-avatar[_ngcontent-%COMP%]{font-size:2rem}.action-section[_ngcontent-%COMP%]{background:#8b5cf60d;border:1px solid rgba(139,92,246,.1)}.completion-section[_ngcontent-%COMP%]{background:#22c55e0d;border:1px solid rgba(34,197,94,.1)}.rounded-4[_ngcontent-%COMP%]{border-radius:1rem!important}"]})}}return i})();export{de as TopicComponent};
