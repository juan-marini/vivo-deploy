<div class="min-vh-100 vivo-gradient">
  <!-- Header -->
  <header class="bg-white shadow-lg">
    <div class="container-fluid">
      <div class="d-flex justify-content-between align-items-center py-3 px-4">
        <div class="d-flex align-items-center">
          <div class="vivo-logo me-3">
            <span class="text-white fw-bold">VIVO</span>
          </div>
          <div>
            <h1 class="h4 mb-0 text-dark fw-bold">Vivo Knowledge</h1>
            <p class="small text-muted mb-0">Sistema de Onboarding</p>
          </div>
        </div>

        <nav class="d-flex align-items-center">
          <a routerLink="/home" class="nav-link text-muted fw-medium me-4">
            <i class="fas fa-home me-1"></i>Home
          </a>
          <a routerLink="/progresso" class="nav-link text-muted fw-medium me-4">
            <i class="fas fa-chart-line me-1"></i>Meu Progresso
          </a>
          <a routerLink="/dashboard" class="nav-link text-muted fw-medium me-4">
            <i class="fas fa-tachometer-alt me-1"></i>Dashboard
          </a>
          <button class="btn btn-outline-purple" (click)="onLogout()">
            <i class="fas fa-sign-out-alt me-1"></i>Sair
          </button>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container-fluid py-4" *ngIf="topic">
    <div class="row justify-content-center">
      <div class="col-12 col-xl-10">
        <div class="bg-white rounded-4 shadow-lg p-4 p-md-5">
          <!-- Back Button -->
          <div class="mb-4">
            <button routerLink="/home" class="btn btn-link text-purple p-0 text-decoration-none">
              <i class="fas fa-arrow-left me-2"></i>Voltar para Home
            </button>
          </div>

          <!-- Topic Header -->
          <div class="mb-5">
            <h2 class="h3 fw-bold text-dark mb-3">Detalhes do Tópico</h2>
            <div class="topic-header p-4 rounded-3 bg-purple-light">
              <h3 class="h4 fw-bold text-purple mb-2">{{ topic.title }}</h3>
              <p class="text-dark mb-0">{{ topic.description }}</p>
            </div>
          </div>

          <div class="row g-4">
            <!-- Documents Section -->
            <div class="col-12 col-lg-4">
              <div class="section-card h-100">
                <h4 class="h5 fw-bold text-dark mb-3 d-flex align-items-center">
                  <i class="fas fa-file-text text-purple me-2"></i>
                  Documentos
                </h4>
                <div class="list-group list-group-flush">
                  <div *ngFor="let doc of topic.documents" class="list-group-item border-0 px-0 py-2">
                    <div class="d-flex align-items-center">
                      <i class="fas"
                         [ngClass]="{
                           'fa-file-pdf text-danger': doc.type === 'pdf',
                           'fa-file-word text-primary': doc.type === 'doc',
                           'fa-file-alt text-secondary': doc.type !== 'pdf' && doc.type !== 'doc'
                         }"
                         style="font-size: 1.2rem;"></i>
                      <div class="flex-grow-1 ms-3">
                        <div class="d-flex justify-content-between align-items-start">
                          <div>
                            <span class="text-dark fw-medium d-block">{{ doc.title }}</span>
                            <div class="small text-muted">{{ doc.type | uppercase }} • {{ doc.size }}</div>
                          </div>
                          <button class="btn btn-outline-purple btn-sm ms-2"
                                  (click)="downloadDocument(doc)"
                                  title="Baixar documento">
                            <i class="fas fa-download"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="topic.documents.length === 0" class="text-muted text-center py-3">
                    <i class="fas fa-inbox mb-2"></i>
                    <div>Nenhum documento disponível</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Links Section -->
            <div class="col-12 col-lg-4">
              <div class="section-card h-100">
                <h4 class="h5 fw-bold text-dark mb-3 d-flex align-items-center">
                  <i class="fas fa-external-link-alt text-purple me-2"></i>
                  Links Úteis
                </h4>
                <div class="list-group list-group-flush">
                  <a *ngFor="let link of topic.links"
                     [href]="link.url"
                     target="_blank"
                     class="list-group-item list-group-item-action border-0 px-0 py-2 text-decoration-none hover-bg-light rounded">
                    <div class="d-flex align-items-center">
                      <i class="fas fa-link text-purple me-3" style="font-size: 1.1rem;"></i>
                      <span class="text-dark fw-medium">{{ link.title }}</span>
                      <i class="fas fa-external-link-alt text-muted ms-auto small"></i>
                    </div>
                  </a>
                  <div *ngIf="topic.links.length === 0" class="text-muted text-center py-3">
                    <i class="fas fa-link mb-2"></i>
                    <div>Nenhum link disponível</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Contacts Section -->
            <div class="col-12 col-lg-4">
              <div class="section-card h-100">
                <h4 class="h5 fw-bold text-dark mb-3 d-flex align-items-center">
                  <i class="fas fa-user text-purple me-2"></i>
                  Contato de Referência
                </h4>
                <div *ngFor="let contact of topic.contacts" class="contact-card p-3 rounded-3 bg-light mb-3 border">
                  <div class="d-flex align-items-start">
                    <div class="contact-avatar me-3">
                      <i class="fas fa-user-circle text-purple" style="font-size: 2.5rem;"></i>
                    </div>
                    <div class="flex-grow-1">
                      <h6 class="fw-bold text-dark mb-1">{{ contact.name }}</h6>
                      <p class="small text-muted mb-2">{{ contact.role }} • {{ contact.department }}</p>
                      <div class="contact-info">
                        <div class="d-flex align-items-center mb-1">
                          <i class="fas fa-envelope text-muted me-2"></i>
                          <a [href]="'mailto:' + contact.email" class="small text-purple text-decoration-none">{{ contact.email }}</a>
                        </div>
                        <div class="d-flex align-items-center">
                          <i class="fas fa-phone text-muted me-2"></i>
                          <a [href]="'tel:' + contact.phone" class="small text-purple text-decoration-none">{{ contact.phone }}</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div *ngIf="topic.contacts.length === 0" class="text-muted text-center py-3">
                  <i class="fas fa-user mb-2"></i>
                  <div>Nenhum contato disponível</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Action Button -->
          <div class="text-center mt-5">
            <button class="btn btn-purple btn-lg px-5" (click)="onMarkCompleted()">
              <i class="fas fa-check me-2"></i>
              Marcar como concluído
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Not Found -->
  <main class="container-fluid py-4" *ngIf="!topic">
    <div class="row justify-content-center">
      <div class="col-12 col-md-6">
        <div class="bg-white rounded-4 shadow-lg p-5 text-center">
          <i class="fas fa-exclamation-triangle text-warning mb-3" style="font-size: 3rem;"></i>
          <h3 class="h4 fw-bold text-dark mb-3">Tópico não encontrado</h3>
          <p class="text-muted mb-4">O tópico que você está procurando não existe ou foi removido.</p>
          <button routerLink="/home" class="btn btn-purple">
            <i class="fas fa-home me-2"></i>Voltar para Home
          </button>
        </div>
      </div>
    </div>
  </main>
</div>
